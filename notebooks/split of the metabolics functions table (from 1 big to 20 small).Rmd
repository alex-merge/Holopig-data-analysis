---
title: "Split of the metabolics functions table"
output: html_notebook
---

This script enables to split the big tsv table into multiple smaller 
tables, easier to read

## I) Parameters to decide

Here the name (prefix) and number of files the table need to be split into 
is chosen.

```{r}

output_basename = "Annot_"
nbr_fichier = 20

```

## II) Import the file

Here, the path to open the file is indicated, and the file is opened in the 
variable data.
The separator is [tab] (it is a tsv file) and the first line isn't considered
as the header here (to keep it in the new data file).

```{r}

filepath = "raw_data/Quantifications_and_functional_annotations.tsv"
data = read.csv(filepath, sep="\t", header = FALSE)


```

## III) Chose the number of lines per new files.

In this section, the number of lines per new files is chosen according to the
number of lines in the original file and the number of files wanted by the user.

```{r}
#Parting the raw data by the number of lines
nb_rows = nrow(data)
nb_rows_per_file = ceiling(nb_rows/nbr_fichier) #round up the number
header_line = data[1,]

nb_row_inf = 1 #row number of the header line

```

## IV) Split of the dataframe

This loop scroll the file, gets the number of lines needed peer new files, 
creates the nw file, and repeate it for each new files.

```{r}
for (id in 1:nbr_fichier) {
  nb_row_inf = nb_row_inf + 1
  nb_row_sup = id*nb_rows_per_file
  out_df = rbind(header_line, data[nb_row_inf:nb_row_sup, ])
  write.table(out_df, 
              file = paste("refined_data/",output_basename,id,".csv", sep=""), 
              row.names = FALSE, col.names = FALSE, sep=";")
  nb_row_inf = nb_row_sup
}
```

